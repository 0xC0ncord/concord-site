{{ define "main" }}
{{ with .Site.GetPage "/posts" }}
<div class="mid">
<h2>Last {{ .Paginator.PageSize }} Posts</h2>
<hr>
<ul class="post-list">
{{ range first .Paginator.PageSize (where .Site.RegularPages ".Type" "posts") }}
<li>
    <a href="{{ .Permalink }}"><h2 class="post-title">{{ .Title }}</h2></a>
    <div class="post-meta">
        <div>
        {{ partial "post-categories.html" . }}
        {{ partial "post-tags.html" . }}
        </div>
        <span class="post-date">{{ .Date.Format "January 2, 2006" }}</span>
    </div>
</li>
{{ end }}
</ul>
{{ if gt ($total := (len (where .Site.RegularPages ".Type" "posts"))) .Paginator.PageSize }}
<a href="/posts/page/2/" class="blog-posts-count">... and {{ ($count := (sub $total .Paginator.PageSize)) }} more {{ cond (eq $count 1) "page" "pages" }}</a>
{{ end }}
<hr>
<div>
<ul class="blog-main-buttons-list">
    <li><a href="/posts/">All posts</a></li>
    <li><a href="/categories/">All categories</a></li>
    <li><a href="/tags/">All tags</a></li>
</ul>
</div>
</div>
{{ end }}
{{ end }}
